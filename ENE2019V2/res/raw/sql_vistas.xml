<sql>	
    <view>DROP VIEW IF EXISTS V_USUARIOS;</view>
	<view>
	    CREATE VIEW V_USUARIOS AS
	    SELECT DISTINCT
			U.*, 
			JB.ID as IDJEFSUP, JB.USUARIO as USUARIOJEFSUP, JB.CLAVE as CLAVEJEFSUP,  
			CD.ID as IDCOR, CD.USUARIO as USUARIOCOR, CD.CLAVE as CLAVECOR,  
			SN.ID as IDSUPNAC, SN.USUARIO as USUARIOSUPNAC, SN.CLAVE as CLAVESUPNAC
			FROM T_USUARIO U 
		      LEFT JOIN T_USUARIO SN ON SN.CARGO_ID = 3 AND SN.COD_SEDE_OPERATIVA='99' AND NOT U.ID=SN.ID
		      LEFT JOIN T_USUARIO CD ON CD.CARGO_ID = 3 AND CD.COD_SEDE_OPERATIVA=U.COD_SEDE_OPERATIVA AND CD.EQUIPO IS NULL AND NOT U.ID=CD.ID
		      LEFT JOIN T_USUARIO JB ON JB.CARGO_ID = 3 AND JB.COD_SEDE_OPERATIVA=U.COD_SEDE_OPERATIVA AND JB.EQUIPO=U.EQUIPO AND NOT U.ID=JB.ID
		      LEFT JOIN T_USUARIO AC ON AC.CARGO_ID = 1 AND AC.COD_SEDE_OPERATIVA=U.COD_SEDE_OPERATIVA AND AC.EQUIPO=U.EQUIPO AND AC.RUTA=U.RUTA AND NOT U.ID=AC.ID
		      LEFT JOIN T_USUARIO RG ON RG.CARGO_ID = 2 AND RG.COD_SEDE_OPERATIVA=U.COD_SEDE_OPERATIVA AND RG.EQUIPO=U.EQUIPO AND RG.RUTA=U.RUTA AND NOT U.ID=RG.ID
		      LEFT JOIN T_USUARIO AR ON AR.CARGO_ID = 5 AND AR.COD_SEDE_OPERATIVA=U.COD_SEDE_OPERATIVA AND AR.EQUIPO=U.EQUIPO AND AR.RUTA=U.RUTA AND NOT U.ID=AR.ID
		      LEFT JOIN T_USUARIO RT ON RT.CARGO_ID = 7 AND RT.COD_SEDE_OPERATIVA=U.COD_SEDE_OPERATIVA AND RT.EQUIPO=U.EQUIPO AND NOT U.ID=RT.ID
		      LEFT JOIN T_USUARIO CC ON CC.CARGO_ID = 8 AND CC.COD_SEDE_OPERATIVA=U.COD_SEDE_OPERATIVA AND CC.EQUIPO=U.EQUIPO AND NOT U.ID=CC.ID;
	</view> 
	<view>DROP VIEW IF EXISTS V_NAVEGATION;</view>
	<view>
		CREATE VIEW V_NAVEGATION AS
			SELECT DISTINCT  C.ID AS ID, C.ID AS CARATULA,C.FUNCIONAMIENTO,  CASE WHEN C.ENC_DNI IS NOT NULL THEN D.VISITA ELSE NULL END AS VISITA, 
			E.MODI, F.MODII, G.MODIII, H.MODIV, I.MODV, J.MODVI, K.MODVII, L.MODVIII, M.MODIX, 
			NULL AS USUCRE, NULL AS FECCRE, NULL AS USUREG, NULL AS FECREG, NULL AS FECENV  
	        FROM T_05_DIG_CARATULA C 
			LEFT JOIN (SELECT ID, COUNT(ID) AS VISITA FROM T_05_DIG_VISITA GROUP BY ID) D ON D.ID = C.ID
			LEFT JOIN (SELECT C.ID, CASE WHEN C.P25 = 4 AND M.C1P111_1 IS NOT NULL THEN M.C1P111_1 
										WHEN C.P25 IN (1,3) AND M.C1P101A_1 IS NOT NULL THEN M.C1P101A_1
										ELSE NULL END AS MODI FROM T_05_DIG_MODULOI M
						INNER JOIN T_05_DIG_CARATULA C) E ON E.ID = C.ID
			LEFT JOIN (SELECT ID, C2P201 AS MODII FROM T_05_DIG_MODULOII) F ON F.ID = C.ID
			LEFT JOIN (SELECT ID, C3P301 AS MODIII FROM T_05_DIG_MODULOIII01) G ON G.ID = C.ID
			LEFT JOIN (SELECT ID, C4P401 AS MODIV FROM T_05_DIG_MODULOIV01) H ON H.ID = C.ID
			LEFT JOIN (SELECT ID, C5P501_1A AS MODV FROM T_05_DIG_MODULOV01) I ON I.ID = C.ID
			LEFT JOIN (SELECT ID, C6P601 AS MODVI FROM T_05_DIG_MODULOVI01) J ON J.ID = C.ID
			LEFT JOIN (SELECT ID, C7P701_1A AS MODVII FROM T_05_DIG_MODULOVII01) K ON K.ID = C.ID
			LEFT JOIN (SELECT ID, C8P801 AS MODVIII FROM T_05_DIG_MODULOVIII) L ON L.ID = C.ID
			LEFT JOIN (SELECT ID, COUNT(ID) AS MODIX FROM T_05_DIG_MODULOIX_DET01 GROUP BY ID) M ON M.ID = C.ID
	</view>
	<view>DROP VIEW IF EXISTS V_AUT_SECTORIAL;</view>
	<view>
		CREATE VIEW V_AUT_SECTORIAL AS
			SELECT DISTINCT  C.SECTOR AS SECCION, C.DESCRIPCION AS DIVISION, S.TIPO AS GRUPO, S.DESCRIPCION, NULL AS ID, NULL AS USUCRE, 
			NULL AS FECCRE,	NULL AS USUREG,	NULL AS FECREG, NULL AS FECENV  
	        FROM AUT_SEC_TIPO S
	        INNER JOIN AUT_SECTORIAL C ON C.SECTOR = S.SECTOR
	</view>
</sql> 
